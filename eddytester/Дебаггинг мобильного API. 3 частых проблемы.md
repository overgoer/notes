Баги в реализации API зачастую универсальны для всех платформ и очень часто повторяются.
Главное знать где искать.
Мобильный тестировщик, скорее всего предпочтёт воспользоваться сниффером и диагностировать проблему в Charles Proxy, например (если не пользовался еще - от крутой [туториал от Влада](https://t.me/QAMobileApps/292))
Я же расскажу, почему API-клиенты вроде Postman, Bruno, Insomnia ускорят дебаггинг в мобильном тестировании на примере 3 часто встречаю
Расскажу о 3 часто встречающихся проблемах, как их быстро определить и почему API-клиенты вроде Postman, Bruno, Insomnia ускорят дебаггинг в мобильном тестировании.

**3 проблемы, часто встречающиеся при тестировании API:**
- Ошибки аутентификации и авторизации
- Несовместимость версий API и клиента 
- Ошибки парсинга JSON

## Ошибки аутентификации и авторизации

***Часто вызвано истекшим токеном доступа***

**Симптом**
- *Пользователь не может обновить ленту новостей \ добавить товар в избранное \ совершить иное действие в приложении*
**Дебаггинг:**
	Отправить запрос на любое действие пользователя с текущим токеном.
	Если код ответа = 401, токен истек
	разбираемся почему и ожидаемое ли это поведение.
	Если токен не должен был "протухнуть" - прикладываем к баг-репорту красивые логи и ответы API.
	
## Несовместимость версий API и клиента

***ОЧЕНЬ частый баг***
Обычно вызвано обновлением серверного API без сохранения обратной совместимости
Симптом:
- Запрос, ранее возвращавший успешный ответ с информацией теперь возвращает "status": 404, Not Found
Дебаггинг:
	Перейти в актуальный Swagger сервиса, проверить, что отправляемый запрос по-прежнему в нём есть
	Скорее всего, запрос на месте, но в URL изменилась версия с api/v.1/... на api/v.1/, а мобильную команду никто не предупредил об этом
## Ошибки парсинга JSON

**Обычно вызвано следующим:**
1. Изменение структуры JSON в ответе API
2. Несоответствие типов данных
3. 3. Неожиданные null значения
**Симптом:**
- Приложение крашится при попытке отобразить данные / Данные отображаются некорректно например как *"N/A"*
**Дебаггинг:**
  Отправить запрос в Postman на тот же эндпоинт, который использует приложение.
  Сравнить полученный JSON с ожидаемой структурой.
  Если структура отличается, использовать Postman для визуализации различий.

Пример приведу только на 1-й случай, когда схема JSON в мобильном приложении и ответе API расходятся:
API книжной библиотеки `https://api.library.com/v2/books/1`

Ожидаемый JSON:
```json
{
  "id": 1,
  "title": "1984",
  "author": "George Orwell"
}
```

Фактический JSON (после обновления API):
```json
{
  "id": 1,
  "bookInfo": {
    "title": "1984",
    "author": "George Orwell"
  }
}
```

Польза Postman:
- Быстро выявляете изменения в структуре JSON
- Можете сохранить оба варианта ответа для сравнения и документации
- Легко создаете тест-кейсы для проверки структуры ответа

2. Несоответствие типов данных
Симптом:
- Некорректное отображение данных (например, возраст автора отображается как "N/A")
Дебаггинг:
  Использовать Postman для проверки типов данных в ответе.
  Сравнить с ожидаемыми типами в документации API.

Пример:
API: `https://api.library.com/v2/authors/1`

Ожидаемый JSON:
```json
{
  "name": "George Orwell",
  "age": 46
}
```

Фактический JSON:
```json
{
  "name": "George Orwell",
  "age": "46"
}
```

Польза Postman:
- Легко определяете несоответствие типов (число vs строка)
- Можете быстро проверить несколько эндпоинтов на аналогичные проблемы
- Создаете тесты в Postman для автоматической проверки типов данных

3. Неожиданные null значения
Симптом:
- Пустые поля в интерфейсе приложения
Дебаггинг:
  Отправить запрос в Postman и проверить наличие null значений.
  Сравнить с документацией API на предмет допустимости null.

Пример:
API: `https://api.library.com/v2/books/2`

Ожидаемый JSON:
```json
{
  "id": 2,
  "title": "To Kill a Mockingbird",
  "author": "Harper Lee",
  "publishYear": 1960
}
```

Фактический JSON:
```json
{
  "id": 2,
  "title": "To Kill a Mockingbird",
  "author": "Harper Lee",
  "publishYear": null
}
```

Часто у мобильного тестировщика будет charles под рукой, или другой сниффер, но я бы предпочел Postman\Insomnia\Bruno, за удобство отображения и работы с запросами и ответами.

Польза Postman:
- Быстро выявляете неожиданные null значения
- Можете создать коллекцию тестов для проверки обязательных полей
- Легко документируете проблему для разработчиков

3. Недостаточные права доступа
4. Проблемы с HTTPS сертификатом
   - Сценарий: Пользователь не может обновить ленту новостей
   - Дебаггинг: Используйте Postman для отправки запроса с текущим токеном. Если получаете 401, токен истек.
   - Польза: Быстро определяете проблему без необходимости анализировать код приложения

5. Неправильные учетные данные при входе
   - Сценарий: Пользователь не может войти в приложение
   - Дебаггинг: Воспроизведите запрос входа в Postman с теми же данными. Проверьте тело ответа на наличие деталей ошибки.
   - Польза: Выявляете, связана ли проблема с API или клиентской частью

6. Недостаточные права доступа
   - Сценарий: Пользователь не может удалить пост
   - Дебаггинг: Отправьте DELETE запрос в Postman. Если получаете 403, проблема в правах доступа.
   - Польза: Определяете, корректно ли API проверяет права пользователя

7. Проблемы с HTTPS сертификатом
   - Сценарий: Все запросы из приложения fail
   - Дебаггинг: Попробуйте тот же запрос в Postman. Если видите ошибку сертификата, проблема на стороне сервера.
   - Польза: Быстро выявляете проблемы с настройкой сервера

8. Несоответствие версий API
   - Сценарий: Новая версия приложения не может авторизоваться
   - Дебаггинг: Сравните заголовки запросов старой и новой версии в Postman. Проверьте, не изменилась ли схема аутентификации.
   - Польза: Обнаруживаете проблемы совместимости между клиентом и сервером

Используя Postman, вы можете быстро изолировать проблему, проверить заголовки, тело запроса и ответа, что значительно ускоряет процесс отладки API-связанных проблем в мобильных приложениях.
Несовместимость версий API и клиента 
Ошибки парсинга JSON