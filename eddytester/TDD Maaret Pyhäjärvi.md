# Практикуете ли вы TDD?

Анализируя множество клиентских организаций, я не могу не отметить запрос, на который до сих пор нет хорошего ответа в тестировании.
Это применение разработки через тестирование (TDD).

Многие из нас знают, что это такое. Обычно мы различаем два разных подхода:

1. TDD в процессе программирования.
   Сверхмалые циклы (изнутри наружу, "чикагская школа").
   Небольшие циклы с использованием моков (снаружи внутрь, "лондонская школа").
2. ATDD (BDD, SBE - множество названий для схожей идеи), где примеры характеризуют функциональность до ее реализации.

У клиентов часто возникает заблуждение, что важно действительно ли тест был написан *до* реализации, и как часто для каждого разработчика имело смысл писать тест первым ("изолировать баг - отличный пример написания теста первым") или писать его как часть функциональности, над которой они работают несколько часов или дней ("легче зафиксировать намерение в том же пул-реквесте, когда я только разобрался, как это реализовать").

В масштабе, который интересует клиента, трудно определить, было ли это до или после.
С точки зрения обучения разработчика методам лучшего контроля и описания намерений, а также предотвращения пропуска важных аспектов при коротком цикле "после", освоение техник разработки через тестирование (как чикагского, так и лондонского стилей) для их комбинирования, вероятно, приносит огромную пользу.

Клиентов не всегда беспокоит, был ли тест написан первым.
Но их интересует, был ли он написан до (в стиле ATDD) и вместе с самим изменением (включен в пул-реквест).

Я обнаружила, что характеризую ответы для этой команды с несколько большей детализацией:

* **Уровень -1. Тестирование после с тестами от тестировщиков и отчетами об ошибках**. Это тоже происходит часто. "Ночной прогон", анализ результатов которого занимает неделю. Мы все через это проходили. Будем надеяться на поколение разработчиков, которые будут в недоумении от такого утверждения.

* **Уровень 0. Отсутствие признаков TDD**. Когда код (мерджится\сливается) через пул-реквест, значительные усилия по тестированию следуют в последующих пул-реквестах. Могут быть изменения в тестах в исходном пул-реквесте, но их цель обычно заключается в том, чтобы заставить старые тесты пройти.

* **Уровень 1. Короткий цикл после**. Когда код (мерджится\сливается), тесты тоже (мерджатся\сливаются). Тот же пул-реквест. Таким образом, в том же репозитории, попадая в конвейер. Мало внимания уделяется тому, было ли это смесью написания до и после реализации, потому что цикл достаточно короткий. Это более управляемо и непрерывно, чем когда-либо раньше, и мы должны это приветствовать.

* **Уровень 1b. Дисциплинированный TDD**. Когда код (мерджится\сливается), тесты тоже (мерджатся\сливаются). Смешивание подходов снаружи внутрь и изнутри наружу, с (моками\заглушками) и без них, но разработчики последовательно пишут тесты первыми.

* **Уровень 2. Критерии приемки с примерами**. Примеры от клиентов, иллюстрирующие ключевые аспекты, которые изменятся после внесения изменений, и введение нового поведения. Само наличие примеров помогает разработчикам иметь более четкое определение (готовности\выполнения задачи), и меньше возвращаться к новой информации для изучения. Не все очевидно для всех одинаково.

* **Уровень 3. BDD автоматизация до реализации**. Примеры, проходящие один за другим, определяют идею о том, закончили ли мы с изменением.

Первые три команды, о которых я думаю, находятся на уровнях -1, 0 и 1. Все они стремятся к уровню 2.

Небольшие шаги могут сделать это изменение более управляемым. На каком уровне находитесь вы, и к чему стремитесь?

# чикагская школа

Вот несколько потенциально полезных источников:

1. Книга "Test-Driven Development: By Example" Кента Бека. Это классическая работа, которая во многом определила принципы "чикагской школы" TDD.

2. Статья "Classic TDD or "Detroit School"" на сайте martinfowler.com. Мартин Фаулер - известный эксперт в области разработки ПО, и его сайт часто содержит глубокие анализы различных подходов к разработке.

3. Блог-пост "London vs. Chicago: Clean Code" от Роберта Мартина (Uncle Bob) может предоставить сравнение между "чикагской" и "лондонской" школами.

4. Книга "Growing Object-Oriented Software, Guided by Tests" Стива Фримена и Ната Прайса, хотя она больше фокусируется на "лондонской школе", но предоставляет хороший контекст для понимания различий между подходами.

5. Статьи на сайте agilealliance.org, посвященные TDD, часто содержат информацию о различных подходах, включая "чикагскую школу".

Рекомендую начать с этих ресурсов, но помните, что в мире разработки ПО информация быстро устаревает. Поэтому всегда полезно искать самые свежие статьи и обсуждения на профессиональных форумах и в сообществах разработчиков.