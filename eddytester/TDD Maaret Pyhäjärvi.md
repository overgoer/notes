# Практикуете ли вы TDD?

Анализируя множество клиентских организаций, я не могу не отметить запрос, на который до сих пор нет хорошего ответа в тестировании.
Это применение разработки через тестирование (TDD).

Многие из нас знают, что это такое. Обычно мы различаем два разных подхода:

1. TDD в процессе программирования.
   Сверхмалые циклы (изнутри наружу, "чикагская школа").
   Небольшие циклы с использованием моков (снаружи внутрь, "лондонская школа").
2. ATDD (BDD, SBE - множество названий для схожей идеи), где примеры характеризуют функциональность до ее реализации.

У клиентов часто возникает заблуждение, что важно действительно ли тест был **написан** *до* реализации.
Но для разработчика писать тест до написания кода - не всегда хорошее решение, в процессе написания кода фичи разработчик многое о ней понимает и намечает слабые места.("легче зафиксировать намерение на тест в том же Pull-реквесте, когда я только разобрался, как это реализовать").

Заказчик ошибочно считает, что его интересует, были ли тест **написан** до самой фичи, что его дествительно интересует - это был ли тест залит в мастер вместе с фичей.

короткий цикл написания теста сразу после кода фичи допустим, особенно когда практика TDD только заводится в команде и разработчикам требуется привыкнуть.

Вот моя версия уровней TDD:

* **Уровень -1. Тестирование после с тестами от тестировщиков и отчетами об ошибках**.
  Это происходит часто.
  "Ночной прогон", анализ результатов которого занимает неделю.
  Мы все через это проходили. Будем надеяться на поколение разработчиков, которые будут в недоумении от такого утверждения.

* **Уровень 0. Отсутствие признаков TDD**.
  Когда код мерджится через пул-реквест, значительные усилия по тестированию следуют в последующих пул-реквестах.
  Могут быть изменения в тестах в исходном пул-реквесте, но их цель обычно заключается в том, чтобы заставить старые тесты пройти.

* **Уровень 1. Короткий цикл после**. 
  Когда код мерджится, тесты тоже мерджатся.
  Тот же пул-реквест.
  Таким образом, в том же репозитории, попадая в конвейер. Не важно, что было написано первым, потому что цикл достаточно короткий.

* **Уровень 1b. Дисциплинированный TDD**.
  Когда код мерджится сразу с тестами.
  Смешивание подходов снаружи внутрь и изнутри наружу, с моками и без них, но разработчики последовательно пишут тесты первыми.

* **Уровень 2. Критерии приемки с примерами**.
  Примеры от клиентов, ярко иллюстрирующие что было изменено и на что повлияло это изменение.
  Само наличие примеров помогает разработчикам иметь более четкое определение готовности, и меньше возвращаться к доке для изучения.
  Не все очевидно для всех одинаково.

* **Уровень 3. BDD автоматизация до реализации**.
  Тесты, проходящие один за другим, определяют, закончили ли мы с изменением.

Двигаться по этим уровням нужно небольшими шагами.
На каком уровне находитесь вы, и к чему стремитесь?

# чикагская школа

Вот несколько потенциально полезных источников:

1. Книга "Test-Driven Development: By Example" Кента Бека. Это классическая работа, которая во многом определила принципы "чикагской школы" TDD.

2. Статья "Classic TDD or "Detroit School"" на сайте martinfowler.com. Мартин Фаулер - известный эксперт в области разработки ПО, и его сайт часто содержит глубокие анализы различных подходов к разработке.

3. Блог-пост "London vs. Chicago: Clean Code" от Роберта Мартина (Uncle Bob) может предоставить сравнение между "чикагской" и "лондонской" школами.

4. Книга "Growing Object-Oriented Software, Guided by Tests" Стива Фримена и Ната Прайса, хотя она больше фокусируется на "лондонской школе", но предоставляет хороший контекст для понимания различий между подходами.

5. Статьи на сайте agilealliance.org, посвященные TDD, часто содержат информацию о различных подходах, включая "чикагскую школу".

Рекомендую начать с этих ресурсов, но помните, что в мире разработки ПО информация быстро устаревает. Поэтому всегда полезно искать самые свежие статьи и обсуждения на профессиональных форумах и в сообществах разработчиков.

# лондонская школа TDD
также известная как "мокистский подход"
это второй основной подход к разработке через тестирование.

Основные характеристики "лондонской школы":
    - Фокус на разработке "снаружи внутрь" (outside-in).
    - Активное использование моков (заглушек) для имитации поведения зависимостей.
    - Акцент на взаимодействии между объектами, а не на их внутреннем состоянии.
    - Тесты часто пишутся на уровне поведения системы.
- Название "лондонская" происходит от того, что этот подход был популяризирован группой разработчиков в Лондоне, включая Стива Фримена и Ната Прайса.
- Ключевые особенности:
    - Начинает с высокоуровневых тестов и постепенно углубляется в детали реализации.
    - Помогает быстро создавать прототипы сложных систем.
    - Уделяет большое внимание дизайну интерфейсов между компонентами.
- Контраст с "чикагской школой":
    - Больше фокуса на изоляции тестируемого кода.
    - Меньше внимания к реальным объектам, больше - к их интерфейсам и взаимодействиям.
- Этот подход особенно полезен при работе с крупными, сложными системами, где изоляция компонентов критична для эффективного тестирования.

Для более глубокого понимания "лондонской школы" TDD рекомендую ознакомиться с книгой "Growing Object-Oriented Software, Guided by Tests" Стива Фримена и Ната Прайса, которая считается основополагающей работой в этом направлении.

Конечно, давайте разберем эти аббревиатуры:

1. ATDD - Acceptance Test-Driven Development (Разработка, управляемая приемочными тестами)
   • Это подход, при котором приемочные тесты пишутся до начала разработки функциональности.
   • Фокусируется на понимании требований заказчика и их формализации в виде тестов.
   • Помогает убедиться, что разработка идет в правильном направлении с точки зрения бизнес-требований.

2. BDD - Behavior-Driven Development (Разработка, управляемая поведением)
   • Расширение TDD и ATDD, которое фокусируется на поведении системы с точки зрения пользователя.
   • Использует язык, понятный как техническим специалистам, так и представителям бизнеса (например, Gherkin).
   • Часто включает в себя написание сценариев в формате "Given-When-Then" (Дано-Когда-Тогда).

3. SBE - Specification by Example (Спецификация на примерах)
   • Методология, в которой требования к системе определяются через конкретные примеры.
   • Помогает устранить неоднозначность в требованиях, предоставляя четкие, выполнимые спецификации.
   • Часто используется в сочетании с ATDD и BDD для создания более понятных и точных требований.

Все эти подходы имеют общую цель: улучшить коммуникацию между разработчиками, тестировщиками и представителями бизнеса, а также обеспечить более точное соответствие разрабатываемого продукта ожиданиям заказчика. Они часто используются вместе или в различных комбинациях в зависимости от потребностей проекта и команды.